<!-- NAVIGATION BAR - Shared across all pages -->
<nav class="navbar">
    <div class="navbar-container">
        <!-- Logo/Brand -->
        <div class="navbar-brand">
            <a href="index.html" class="logo">
                <img src="ecopulse_logo.png" alt="Eco Pulse" class="logo-image">
            </a>
        </div>

        <!-- Navigation Links -->
        <ul class="navbar-links">
            <li><a href="index.html" class="nav-link" data-page="index" data-role="professor">Dashboard</a></li>
            <li><a href="energy.html" class="nav-link" data-page="energy" data-role="professor">Energy & Solar</a></li>
            <li><a href="waste.html" class="nav-link" data-page="waste" data-role="professor">Waste Monitoring</a></li>
            <li><a href="student.html" class="nav-link" data-page="student" data-role="student">Student Zone</a></li>
            <li><a href="leaderboard.html" class="nav-link" data-page="leaderboard" data-role="student">Leaderboard</a></li>
            <li><a href="insights.html" class="nav-link" data-page="insights" data-role="professor">Insights</a></li>
            <li><a href="carbon.html" class="nav-link" data-page="carbon" data-role="professor">Carbon Credits</a></li>
            <li><a href="about.html" class="nav-link" data-page="about" data-role="professor">About</a></li>
        </ul>

        <!-- User Section (optional) -->
        <div class="navbar-user">
            <span class="user-role" id="userRole" style="display: none;"></span>
            <button class="logout-btn" id="logoutBtn" style="display: none;" onclick="logout()">Logout</button>
        </div>
    </div>
</nav>

<style>
    /* Navigation Bar Styles */
    .navbar {
        background: #fff;
        border-bottom: 2px solid #e0e0e0;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        position: sticky;
        top: 0;
        z-index: 1000;
    }

    .navbar-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 24px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        height: 72px;
    }

    /* Logo/Brand */
    .navbar-brand {
        flex-shrink: 0;
    }

    .logo {
        display: flex;
        align-items: center;
        text-decoration: none;
    }

    .logo-image {
        height: 52px;
        width: auto;
        display: block;
    }

    /* Navigation Links */
    .navbar-links {
        display: flex;
        gap: 8px;
        list-style: none;
        flex: 1;
        margin: 0 32px;
        padding: 0;
    }

    .nav-link {
        display: inline-block;
        padding: 8px 16px;
        text-decoration: none;
        color: #333;
        font-weight: 500;
        font-size: 0.95rem;
        border-radius: 6px;
        transition: all 0.3s ease;
        position: relative;
    }

    .nav-link:hover {
        color: #1a5490;
        background: #f0f4f8;
    }

    /* Active Page Highlight */
    .nav-link.active {
        color: #1a5490;
        background: #e3f2fd;
        font-weight: 600;
    }

    .nav-link.active::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 16px;
        right: 16px;
        height: 3px;
        background: #1a5490;
        border-radius: 2px 2px 0 0;
    }

    /* User Section */
    .navbar-user {
        display: flex;
        align-items: center;
        gap: 16px;
        flex-shrink: 0;
    }

    .user-role {
        font-size: 0.9rem;
        color: #666;
        padding: 6px 12px;
        background: #f5f5f5;
        border-radius: 4px;
    }

    .logout-btn {
        padding: 8px 16px;
        background: #f44336;
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-weight: 500;
        font-size: 0.9rem;
        transition: background 0.3s;
    }

    .logout-btn:hover {
        background: #d32f2f;
    }

    /* Mobile Responsive */
    @media (max-width: 768px) {
        .navbar-container {
            padding: 0 16px;
            height: auto;
            flex-wrap: wrap;
        }

        .navbar-links {
            margin: 12px 0;
            gap: 4px;
            flex-basis: 100%;
            order: 3;
            flex-wrap: wrap;
        }

        .nav-link {
            padding: 6px 12px;
            font-size: 0.85rem;
        }

        .navbar-user {
            order: 2;
        }
    }

    @media (max-width: 480px) {
        .navbar-links {
            gap: 2px;
        }

        .nav-link {
            padding: 6px 10px;
            font-size: 0.8rem;
        }

        .navbar-user {
            flex-direction: column;
            gap: 8px;
        }
    }
</style>

<script>
    // ACTIVE PAGE HIGHLIGHTING
    // Automatically highlight the current page link in the navbar
    function setActiveNavLink() {
        // Get current page filename
        const currentPage = window.location.pathname.split('/').pop() || 'index.html';
        const pageBaseName = currentPage.replace('.html', '');

        // Find and highlight matching nav link
        const navLinks = document.querySelectorAll('.nav-link');
        navLinks.forEach(link => {
            const pageName = link.getAttribute('data-page');
            
            if (pageName === pageBaseName || 
                (pageBaseName === '' && pageName === 'index') ||
                (pageBaseName === 'index' && pageName === 'index')) {
                link.classList.add('active');
            } else {
                link.classList.remove('active');
            }
        });
    }

    // LOGOUT FUNCTION
    // Clear session and redirect to login
    function logout() {
        if (confirm('Are you sure you want to logout?')) {
            localStorage.clear();
            sessionStorage.clear();
            window.location.href = 'login.html';
        }
    }

    // Show/hide logout button based on login status
    function updateNavbarUser() {
        const username = localStorage.getItem('username');
        const userRole = localStorage.getItem('userRole');

        if (username && userRole) {
            const userRoleEl = document.getElementById('userRole');
            const logoutBtn = document.getElementById('logoutBtn');
            
            if (userRoleEl && logoutBtn) {
                const roleLabel = userRole === 'professor' ? 'Professor' : 'Student';
                userRoleEl.textContent = `${roleLabel}: ${username}`;
                userRoleEl.style.display = 'block';
                logoutBtn.style.display = 'block';
            }
        }
    }

    // Role-based navbar visibility
    function applyRoleBasedNav() {
        const userRole = localStorage.getItem('userRole');
        const navLinks = document.querySelectorAll('.nav-link');

        navLinks.forEach(link => {
            const linkRole = link.getAttribute('data-role');

            if (!userRole || !linkRole) {
                link.style.display = '';
                return;
            }

            if (userRole === 'student') {
                link.style.display = linkRole === 'student' ? '' : 'none';
                return;
            }

            if (userRole === 'professor') {
                link.style.display = linkRole === 'professor' ? '' : 'none';
                return;
            }

            link.style.display = '';
        });
    }

    function initNavbar() {
        applyRoleBasedNav();
        setActiveNavLink();
        updateNavbarUser();
    }

    // Initialize on DOM ready
    document.addEventListener('DOMContentLoaded', initNavbar);
    if (document.readyState !== 'loading') {
        initNavbar();
    }
</script>
